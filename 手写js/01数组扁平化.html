<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>数组扁平化</title>
  </head>
  <body>
    <script>
      // //使用Array.prototype.flat方法
      // const arr = [
      //   [[1, 2], 3],
      //   4,
      //   [
      //     [4, 8],
      //     [9, 77],
      //   ],
      // ];
      // const newArr = arr.flat(Infinity);
      // console.log(newArr); //[1, 2, 3, 4, 4, 8, 9, 77]
      // //使用reduce
      // const arrFlat = (array) => {
      //   return array.reduce((pre, cur) => {
      //     return pre.concat(Array.isArray(cur) ? arrFlat(cur) : cur);
      //   }, []);
      // };
      // console.log(arrFlat(arr));
      // //递归
      // const res = [];
      // const flatWay = (array) => {
      //   for (let i = 0; i < array.length; i++) {
      //     if (Array.isArray(array[i])) {
      //       flatWay(array[i]);
      //     } else {
      //       res.push(array[i]);
      //     }
      //   }
      // };
      // flatWay(arr);
      // console.log(res);
      //计算数组最大深度
      // let max = 1;
      // function getArrayMaxDepth(nums, depth) {
      //   for (let i = 0; i < nums.length; i++) {
      //     if (nums[i].constructor === Array) {
      //       getArrayMaxDepth(nums[i], depth + 1);
      //       max = Math.max(depth +1 , max);
      //     }

      //   }
      //   return max;
      // }
      //使用正则
      // const arr = [1, [1, 2], [1, [3]]];
      // const res = JSON.stringify(arr).replace(/\[|\]/g, "");
      // const res2 = JSON.parse("[" + res + "]");
      // console.log(res2);

      //扩展运算符
      // let arr = [1, [2, [3, 4]]];
      // function flatten(arr) {
      //   while (arr.some((i) => Array.isArray(i))) {
      //     arr = [].concat(...arr);
      //   }
      //   return arr;
      // }
      // console.log(flatten(arr)); //  [1, 2, 3, 4，5]

      //split + toString 实现
      let arr = [1, [2, [3, 4]]];
      function flatten(arr) {
        return arr
          .toString()
          .split(",")
          .map((i) => Number(i));
      }
      console.log(flatten(arr)); //  [1, 2, 3, 4]
    </script>
  </body>
</html>
