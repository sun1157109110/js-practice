<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ajax</title>
</head>
<body>
    <script>
        // function ajax(method,url){
        //     return new Promise((resolve,reject)=>{
        //         //创建xhr对象
        //         let xhr = XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");
        //         //初始化一个请求
        //         xhr.open(method,url,false);
        //         xhr.setRequestHeader('Accept', 'application/json');
        //         xhr.onReadyState = function(){
        //             if(xhr.readyState!==4)return;
        //             if(xhr.status===200||xhr.status===304){
        //                 resolve(xhr.responseText)
        //             }
        //         }
        //         xhr.send()
        //     })
        // }

        function ajax(method,url){
            return new Promise((resolve,reject)=>{
                const xhr = XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");
                xhr.open(method,url,false);
                xhr.setRequestHeader('Accept','application/json')
                xhr.onReadyState = function(){
                    if(xhr.readyState!==4)return;
                    if(xhr.status===200||xhr.status ===304){
                        resolve(xhr.responseText)
                    }else{
                        reject(new Error(xhr.responseText))
                    }
                }
                
                xhr.send()
            })
        }
    </script>
</body>
</html>